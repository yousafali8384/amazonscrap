<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

</head>
<style>

/* loader style */

#loader-wrapper {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	z-index: 1000;
}

#loader-ajax {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	z-index: 1000;
}

#loader {
	display: block;
	position: relative;
	left: 50%;
	top: 50%;
	width: 150px;
	height: 150px;
	margin: -75px 0 0 -75px;
	border-radius: 50%;
	border: 3px solid transparent;
	border-top-color: #EE0C82;
	-webkit-animation: spin 2s linear infinite;
	animation: spin 2s linear infinite;
}

#loader:before {
	content: "";
	position: absolute;
	top: 5px;
	left: 5px;
	right: 5px;
	bottom: 5px;
	border-radius: 50%;
	border: 3px solid transparent;
	border-top-color: #E556A4;
	-webkit-animation: spin 3s linear infinite;
	animation: spin 3s linear infinite;
}

#loader:after {
	content: "";
	position: absolute;
	top: 15px;
	left: 15px;
	right: 15px;
	bottom: 15px;
	border-radius: 50%;
	border: 3px solid transparent;
	border-top-color: #d4d5d9;
	-webkit-animation: spin 1.5s linear infinite;
	animation: spin 1.5s linear infinite;
}

@-webkit-keyframes spin {
	0% {
		-webkit-transform: rotate(0);
		transform: rotate(0);
	}
	100% {
		-webkit-transform: rotate(360deg);
		transform: rotate(360deg);
	}
}

@-moz-keyframes spin {
	0% {
		-webkit-transform: rotate(0);
		transform: rotate(0);
	}
	100% {
		-webkit-transform: rotate(360deg);
		transform: rotate(360deg);
	}
}

@-o-keyframes spin {
	0% {
		-webkit-transform: rotate(0);
		transform: rotate(0);
	}
	100% {
		-webkit-transform: rotate(360deg);
		transform: rotate(360deg);
	}
}

@keyframes spin {
	0% {
		-webkit-transform: rotate(0);
		transform: rotate(0);
	}
	100% {
		-webkit-transform: rotate(360deg);
		transform: rotate(360deg);
	}
}

/* end of loader style */

</style>
<body>
        <div id="loader-ajax" style="background: rgba(255,255,255,.7); display: none;">
                <div id="loader"></div>
            </div>
    <div class="container">
        <div class="col">
            <div class="form-group" style="display: flex; margin-top:16px">
                <input class="form-control col-sm-4" id="itemSearch" type="text" name="itemSearch"
                    placeholder="Enter Item Name" style="margin-right: 2px">
                <p class="col-sm-5">Execution Time: <span id="exec_time"></span></p>
                <button class="btn btn-primary col-sm-3" style="width: 120px" data-toggle="modal"
                    data-target="#dataModal">Show Data</button>
            </div>
            <div class="modal" id="dataModal">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">

                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Product Details</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>

                        <div class="modal-body" id="modalBody1">

                        </div>
                    </div>
                </div>
            </div>
          
            <div class="form-group" style="display: flex; margin-top:16px">
                <input class="form-control col-sm-4" id="itemSearch1" type="text" name="itemSearch1"
                    placeholder="Enter Item Name" style="margin-right: 2px">
                <p class="col-sm-5">Execution Time: <span id="exec_time1"></span></p>
                <button class="btn btn-primary col-sm-3" style="width: 120px" data-toggle="modal"
                    data-target="#dataModal1">Show Data</button>
            </div>
            <div class="modal" id="dataModal1">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">

                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Product Details</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>

                        <div class="modal-body" id="modalBody2">

                        </div>
                    </div>
                </div>
            </div>
        
            <div class="form-group" style="display: flex; margin-top:16px">
                <input class="form-control col-sm-4" id="itemSearch2" type="text" name="itemSearch2"
                    placeholder="Enter Item Name" style="margin-right: 2px">
                <p class="col-sm-5">Execution Time: <span id="exec_time2"></span></p>
                <button class="btn btn-primary col-sm-3" style="width: 120px" data-toggle="modal"
                    data-target="#dataModal2">Show Data</button>
            </div>
            <div class="modal" id="dataModal2">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">

                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Product Details</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>

                        <div class="modal-body" id="modalBody3">

                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group" style="display: flex; margin-top:16px">
                <input class="form-control col-sm-4" id="itemSearch3" type="text" name="itemSearch3"
                    placeholder="Enter Item Name" style="margin-right: 2px">
                <p class="col-sm-5">Execution Time: <span id="exec_time3"></span></p>
                <button class="btn btn-primary col-sm-3" style="width: 120px" data-toggle="modal"
                    data-target="#dataModal3">Show Data</button>
            </div>
            <div class="modal" id="dataModal3">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">

                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Product Details</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>

                        <div class="modal-body" id="modalBody4">

                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group" style="display: flex; margin-top:16px">
                <input class="form-control col-sm-4" id="itemSearch4" type="text" name="itemSearch4"
                    placeholder="Enter Item Name" style="margin-right: 2px">
                <p class="col-sm-5">Execution Time: <span id="exec_time4"></span></p>
                <button class="btn btn-primary col-sm-3" style="width: 120px" data-toggle="modal"
                data-target="#dataModal4">Show Data</button>
            </div>
            <div class="modal" id="dataModal4">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">

                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Product Details</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>

                        <div class="modal-body" id="modalBody5">

                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group" style="display: flex; margin-top:16px">
                <input class="form-control col-sm-4" id="itemSearch5" type="text" name="itemSearch5"
                    placeholder="Enter Item Name" style="margin-right: 2px">
                <p class="col-sm-5">Execution Time: <span id="exec_time5"></span></p>
                <button class="btn btn-primary col-sm-3" style="width: 120px" data-toggle="modal"
                    data-target="#dataModal5">Show Data</button>
            </div>
            <div class="modal" id="dataModal5">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">

                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Product Details</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>

                        <div class="modal-body" id="modalBody6">

                        </div>
                    </div>
                </div>
            </div>
            <button onclick="myfunction()">Submit</button>
        </div>
    </div>
    <script>
        function msToTime(duration) {
            var milliseconds = parseInt((duration % 1000) / 100),
                seconds = Math.floor((duration / 1000) % 60),
                minutes = Math.floor((duration / (1000 * 60)) % 60),
                hours = Math.floor((duration / (1000 * 60 * 60)) % 24);

            hours = (hours < 10) ? "0" + hours : hours;
            minutes = (minutes < 10) ? "0" + minutes : minutes;
            seconds = (seconds < 10) ? "0" + seconds : seconds;

            return hours + ":" + minutes + ":" + seconds + "." + milliseconds;
        }

        function updateModal(data) {
            console.log(data)
            var list = ""
            list += '<div class="card" style="width: 100%;margin: 10px 0px;">'

            list += '<div class="card-body p-0">'
            list += '<Strong>Average Price</Strong> &nbsp; $'+data.avgPrice.avgPrice+'&nbsp;&nbsp;&nbsp;'
            list += '<Strong>Average Ratings</Strong> &nbsp; '+data.avgPrice.avgStar+' out of 5 stars&nbsp;&nbsp;&nbsp;'
            list += '<Strong>Average Seller Rank</Strong> &nbsp;'
            var b=new Number(data.avgPrice.avgBestSell);
            list += ''+b.toLocaleString()+''
            list += '</div>'
            list += '</div>'
            data.items.forEach(function (item) {
                list += '<div class="row">'
                list += '<div class="col-md-8">'
                list += '<div class="card" style="width: 100%; margin: 10px 0px; min-height: 227px">'
                list += '<div class="card-body p-0">'
                list += '<h6 style="padding: 8px; background: #ededed;">Product Details</h6>'
                list += '<li class="media">'
                list += '<a href="' + item.link + '" target="_blank" style="text-decoration: none; color:inherit;">'
                list += '<img class="mr-3" src="' + item.image + '" style="padding: 5px;" width="165px" height="165px" alt="Generic placeholder image"></a>'
                list += '<div class="media-body p-2">'
                list += '<a class="img-size" href="' + item.link + '">'
                list += '<h5 class="mt-0 mb-1">' + item.title
                list += '</h5>'
                list += '</a>'
                list += '<h5>' + item.price + '</h5>'
                list += '<h6>' + item.rattings + '</h6>' + item.description
                list += '</div>'
                list += ' </li>'
                list += '</div>'
                list += '</div>'
                list += '</div>'
                list += '<div class="col-md-4">'
                list += '<div class="card" style="width: 100%; margin: 10px 0px; min-height: 227px">'
                list += '<h6 style="padding: 8px;background: #ededed;">Product Seller Rank</h6>'
                if (item.description != "" && item.description != undefined) {
                    list += '<span style="padding: 8px;">' + item.description + '</span>'
                } else {
                    list += ' <span style="padding: 8px;">No Seller Rank for this item.</span>'
                }
                list += '</div>'
                list += ' </div>'
                list += ' </div>'
            })
            return list;
        }

        function myfunction() {
            $('#loader-ajax').show();
            var start = performance.now();
            var x = document.getElementById('itemSearch').value;

            $.ajax({
                url: '/get-items/' + x,
                type: 'POST',
                data: 'search',
                success: function (data) {
                    var end = performance.now();
                    var time = end - start;
                    document.getElementById('exec_time').innerHTML=msToTime(time);
                    var modalBody = document.getElementById("modalBody1")

                  var modelHtml =  updateModal(data);
                  modalBody.innerHTML=modelHtml;
                  $('#loader-ajax').hide();

                    myfunction1();
                },
                error: function (error) {

                }
            })


        }

        function myfunction1() {
            $('#loader-ajax').show();

            var start = performance.now();

            var x = document.getElementById('itemSearch1').value;

            $.ajax({
                url: '/get-items/' + x,
                type: 'POST',
                data: 'search',
                success: function (data) {
                    var end = performance.now();
                    var time = end - start;
                    document.getElementById('exec_time1').innerHTML=msToTime(time);
                    var modalBody = document.getElementById("modalBody2")

                    var modelHtml =  updateModal(data);
                    modalBody.innerHTML=modelHtml;
                    $('#loader-ajax').hide();

                    myfunction2();
                },
                error: function (error) {

                }
            })

        }

        function myfunction2() {
            $('#loader-ajax').show();

            var start = performance.now();

            var x = document.getElementById('itemSearch2').value;

            $.ajax({
                url: '/get-items/' + x,
                type: 'POST',
                data: 'search',
                success: function (data) {
                    var end = performance.now();
                    var time = end - start;
                    document.getElementById('exec_time2').innerHTML=msToTime(time);
                    var modalBody = document.getElementById("modalBody3")

                  var modelHtml =  updateModal(data);
                  modalBody.innerHTML=modelHtml;
                  $('#loader-ajax').hide();

                    myfunction3();
                },
                error: function (error) {

                }
            })

        }

        function myfunction3() {
            $('#loader-ajax').show();

            var start = performance.now();

            var x = document.getElementById('itemSearch3').value;

            $.ajax({
                url: '/get-items/' + x,
                type: 'POST',
                data: 'search',
                success: function (data) {
                    var end = performance.now();
                    var time = end - start;
                    document.getElementById('exec_time3').innerHTML=msToTime(time);
                    var modalBody = document.getElementById("modalBody4")

                  var modelHtml =  updateModal(data);
                  modalBody.innerHTML=modelHtml;
                  $('#loader-ajax').hide();

                    myfunction4();
                },
                error: function (error) {

                }
            })

        }
        function myfunction4() {
            $('#loader-ajax').show();

            var start = performance.now();

            var x = document.getElementById('itemSearch4').value;

            $.ajax({
                url: '/get-items/' + x,
                type: 'POST',
                data: 'search',
                success: function (data) {
                    var end = performance.now();
                    var time = end - start;
                    document.getElementById('exec_time4').innerHTML=msToTime(time);
                    var modalBody = document.getElementById("modalBody5")

                  var modelHtml =  updateModal(data);
                  modalBody.innerHTML=modelHtml;
                  $('#loader-ajax').hide();

                    myfunction5();
                },
                error: function (error) {

                }
            })

        }
        function myfunction5() {
            $('#loader-ajax').show();

            var start = performance.now();

            var x = document.getElementById('itemSearch5').value;

            $.ajax({
                url: '/get-items/' + x,
                type: 'POST',
                data: 'search',
                success: function (data) {
                    var end = performance.now();
                    var time = end - start;
                    document.getElementById('exec_time5').innerHTML=msToTime(time);
                    var modalBody = document.getElementById("modalBody6")

                  var modelHtml =  updateModal(data);
                  modalBody.innerHTML=modelHtml;
                  $('#loader-ajax').hide();

                },
                error: function (error) {

                }
            })

        }
    </script>


</body>

</html>